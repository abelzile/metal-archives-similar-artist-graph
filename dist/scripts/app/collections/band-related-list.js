define(["require","jquery","underscore","backbone","app/models/band","app/collections/band-list","app/collections/band-related-item-parser"],function(require,$,_,Backbone,Band,BandList,BandRelatedItemParser){"use strict";return BandList.extend({MAX_RESULTS:10,parse:function(response,options){var models=[],queryResponse=response.query;if(0===queryResponse.count)return models;var responseRows=queryResponse.results.tr;if(1===queryResponse.count&&"no_artists"===responseRows.td.id)return models;for(var max=Math.min(responseRows.length,this.MAX_RESULTS),i=0;max>i;++i){var val=responseRows[i],parser=new BandRelatedItemParser(val);parser.isValid()&&models.push(new Band({id:parser.getId(),name:parser.getFullName(),genre:parser.getGenre(),country:parser.getCountry(),score:parser.getScore(),parentBand:options.parentBand,relatedBands:new(require("app/collections/band-related-list"))}))}return models},reset:function(models,options){return options=options||{isSourceOfReset:!0},_.has(options,"isSourceOfReset")||(options.isSourceOfReset=!0),Backbone.Collection.prototype.reset.call(this,models,options)}})});